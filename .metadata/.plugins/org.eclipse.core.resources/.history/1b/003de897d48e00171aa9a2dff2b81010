import processing.core.PApplet;

public class Line {
    private double x1, y1, x2, y2;

    public Line(int mouseX1, int mouseY1, int mouseX2, int mouseY2) {
        x1 = mouseX1;
        y1 = mouseY1;
        x2 = mouseX2;
        y2 = mouseY2;
    }

    public void draw(PApplet drawer) {
        drawer.line((int) x1, (int) y1, (int) x2, (int) y2);
    }

    public void setPoint2(int mouseX, int mouseY) {
        this.x2 = mouseX;
        this.y2 = mouseY;
    }

    public boolean intersects(Line other) {
        double x3 = other.x1;
        double x4 = other.x2;
        double y3 = other.y1;
        double y4 = other.y2;

        double num1 = ((x1 * y2 - y1 * x2) * (x3 - x4)) - ((x1 - x2) * (x3 * y4 - y3 * x4));
        double denom1 = ((x1 - x2) * (y3 - y4)) - ((y1 - y2) * (x3 - x4));
        double num2 = ((x1 * y2 - y1 * x2) * (y3 - y4)) - ((y1 - y2) * (x3 * y4 - y3 * x4));
        double denom2 = ((x1 - x2) * (y3 - y4)) - ((y1 - y2) * (x3 - x4));

        System.out.println(x1);
        System.out.println(y1);
        System.out.println(x2);
        System.out.println(y2);
        System.out.println(x3);
        System.out.println(y3);
        System.out.println(x4);
        System.out.println(y4);

        if (denom1 != 0 && denom2 != 0) {
            double pX = num1 / denom1;
            double pY = num2 / denom2;

            if ((pX > Math.min(x1, x2) && pX < Math.max(x1, x2)) && (pX > Math.min(x3, x4) && pX < Math.max(x3, x4))) {
                if ((pY > Math.min(y1, y2) && pY < Math.max(y1, y2))
                        && (pY > Math.min(y3, y4) && pY < Math.max(y3, y4))) {
                    return true;
                }
            }
        } else if (denom1 == 0 && denom2 == 0) {
            return false;
        } else if (denom1 == 0 && denom2 != 0) {
            double pY = num2 / denom2;
            if ((pY > Math.min(y1, y2) && pY < Math.max(y1, y2)) && (pY > Math.min(y3, y4) && pY < Math.max(y3, y4))) {
                return true;
            }
        } else if (denom1 != 0 && denom2 == 0) {
            double pY = num1 / denom1;
            if ((pY > Math.min(y1, y2) && pY < Math.max(y1, y2)) && (pY > Math.min(y3, y4) && pY < Math.max(y3, y4))) {
                return true;
            }
        }
        return false;
    }
}
