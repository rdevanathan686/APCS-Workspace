import java.awt.Color;

import processing.core.PApplet;
import processing.event.KeyEvent;

public class DrawingSurface extends PApplet {
	
	private House house;
	private Person person, person2;
	
	public static final float SCREEN_WIDTH = 500f;
	public static final float SCREEN_HEIGHT = 500f;
	
	
	public static final String RIGHT = "RIGHT";
	public static final String LEFT = "LEFT";
	public static final String UP = "UP";
	public static final String DOWN = "DOWN";
	
	// create the house and person objects
	public DrawingSurface()
	{
		house = new House();
		person = new Person(100, 300, RIGHT);
		person2 = new Person(400, 300, LEFT);
	}
	
	// loops 60 times/sec to draw the characters with the updated changes 
	public void draw ()
	{
		background(255);

		scale((float)width / SCREEN_WIDTH, (float)height / SCREEN_HEIGHT);
		
		house.draw(this);
		person.draw(this);
		person2.draw(this);
		
		
		if (person.getSaberLine() != null && person2.getSaberLine() != null)
		{
			if (person.getSaberLine().intersects(person2.getSaberLine()))
			{
				person.setSaberColor(Color.BLUE);
				person2.setSaberColor(Color.BLUE);
				
				
				ellipse((float) person.getSaberLine().getPx(person2.getSaberLine()), 
						(float)person.getSaberLine().getPy(person2.getSaberLine()), 10f, 10f);
			}
			else
			{
				person.setSaberColor(Color.RED);
				person2.setSaberColor(Color.RED);
			}
		}
			
			

	}
	
	/* mouseDragged listener that calls the move method in the 
	 * house to change its x and y coordinates
	*/
	public void mouseDragged()
	{
		
		house.move(mouseX, mouseY, pmouseX, pmouseY);
		
		
	}
	
	/* mouseWheel listener that calls the zoom method in the 
	 * house to change its scaleFactor
	*/
	@SuppressWarnings("deprecation")
	public void mouseWheel() 
	{
		int direction = mouseEvent.getCount();
		house.zoom(direction, mouseX, mouseY);
		
	}

	/* keyPressed listener that calls the move and changeHeadColor 
	 * in the person to change its x, y coordinates and the color of the head
	*/
	public void keyPressed() 
	{

		if (keyCode == PApplet.RIGHT)
			person2.move(RIGHT);
		else if (keyCode == PApplet.LEFT)
			person2.move(LEFT);
		else if (keyCode == PApplet.UP)
			person2.move(UP);
		else if (keyCode == PApplet.DOWN)
			person2.move(DOWN);
		
		else if (keyCode == 'W')
			person.move(UP);
		else if (keyCode == 'A')
			person.move(LEFT);
		else if (keyCode == 'S')
			person.move(DOWN);
		else if (keyCode == 'D')
			person.move(RIGHT);
		
		
		
		else if (keyCode == PApplet.ENTER)
		{
			person.changeSaberColor();
			person2.changeSaberColor();
		}
		
		else if (keyCode == 'J')
			person.jump();
		
			
		
		
	}
	
	
	
	
	

}
